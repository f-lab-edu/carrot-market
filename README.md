# carrot-market 서비스 개요

프로젝트는 도메인별로 분리된 마이크로서비스 형태로 설계됩니다. 각 서비스별 책임 데이터와 핵심 기능을 아래와 같이 정리합니다.

---

## 1. User Service (회원 / 인증 / 프로필)
- 책임 데이터
    - 사용자 계정, 인증 정보, 기본 프로필
- 핵심 기능
    - 회원가입 / 탈퇴
    - 이메일·닉네임 중복 검사
    - 비밀번호 암호화
    - 로그인 / 로그아웃
    - 기본 정보 조회
    - 동네 위치 인증 (사용자 주도)
- 제외 항목
    - 거래 내역, 상품 정보, 매너온도(결과만 조회)

---

## 2. Product Service (상품 도메인)
- 책임 데이터
    - 상품 기본 정보 및 상태
- 핵심 기능
    - 상품 등록 / 수정 / 삭제
    - 단건 및 목록 조회
    - 상태 관리: 판매중 / 예약중 / 숨김 / 거래완료
    - 특정 상품 노출 차단(사용자-상품 관계의 노출 제어 책임)
- 발행 이벤트
    - ProductCreated, ProductUpdated, ProductStatusChanged

---

## 3. Like Service (좋아요 / 관심)
- 책임 데이터
    - 사용자 ↔ 상품 관심 관계
- 핵심 기능
    - 좋아요 등록 / 취소
    - 좋아요 목록 조회
- 설계 이유
    - 관계를 Product 내부에 넣으면 쓰기 부하 및 관계 폭발 우려

---

## 4. Search Service (검색 / 조회 전용 Read Model)
- 책임 데이터
    - 검색 최적화된 상품 뷰, 개인화 추천 결과
- 핵심 기능
    - 카테고리별 검색 (페이징)
    - 키워드 기반 검색 (페이징) — 예: 텍스트 분석·형태소·연관 키워드 처리
    - 필터/정렬
    - AI 기반 개인화 추천 (페이징)
- 특징
    - Product DB 직접 조회하지 않음, 별도의 Search DB(예: Elasticsearch) 사용

---

## 5. Order Service (거래 / 구매·판매 내역)
- 책임 데이터
    - 거래 정보, 구매자/판매자 관계
- 핵심 기능
    - 거래 생성 및 상태 관리
    - 구매내역 / 판매내역 조회
- 위치
    - 핵심 도메인(Core Domain)

---

## 6. Payment Service (결제)
- 책임 데이터
    - 결제 기록, 결제 상태
- 핵심 기능
    - 결제 요청 / 승인 / 실패 처리
    - 결제 취소 및 환불
- 분리 이유
    - 외부 PG 연동과 트랜잭션 복잡성으로 Order와 분리

---

## 7. Chat Service (채팅)
- 책임 데이터
    - 채팅방, 메시지
- 핵심 기능
    - 거래 관련 채팅방 생성
    - 실시간 메시지 전송 및 조회
- 특징
    - WebSocket 사용, 메시지 저장용 별도 DB

---

## 8. Review Service (거래 후기)
- 책임 데이터
    - 거래 후기, 평가 점수
- 핵심 기능
    - 후기 작성 및 조회
    - 거래 완료 여부 검증 후 후기 허용
- 발행 이벤트
    - ReviewCreated

---

## 9. Manner Service (매너온도)
- 책임 데이터
    - 사용자별 매너온도(계산 결과)
- 핵심 기능
    - 자정 배치 실행으로 신규 후기 기반 매너온도 계산 및 반영
    - 매너온도 조회 제공
- 특징
    - Review Service 이벤트 소비, 매너온도 쓰기 권한 독점

---

## 부가요소
- 각 서비스는 명확한 쓰기/읽기 책임을 가지며 이벤트 기반 통신을 권장합니다.
- 검색/추천은 별도 읽기 저장소를 사용하여 조회 성능을 최적화합니다.
